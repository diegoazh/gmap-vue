"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6302],{2976:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>p,frontMatter:()=>i,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"vue-3-version/guide/components/map","title":"Map","description":"This component helps you to create a Map with the Google Maps API. For more information read the Google Maps documentation for the map.","source":"@site/docs/vue-3-version/guide/components/map.md","sourceDirName":"vue-3-version/guide/components","slug":"/vue-3-version/guide/components/map","permalink":"/gmap-vue/docs/vue-3-version/guide/components/map","draft":false,"unlisted":false,"editUrl":"https://github.com/diegoazh/gmap-vue/docs/vue-3-version/guide/components/map.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"id":"map","sidebar_position":2,"sidebar_label":"Map"},"sidebar":"vue3Version","previous":{"title":"Autocomplete","permalink":"/gmap-vue/docs/vue-3-version/guide/components/autocomplete"},"next":{"title":"API","permalink":"/gmap-vue/docs/category/api-1"}}');var s=o(6070),a=o(7252);const i={id:"map",sidebar_position:2,sidebar_label:"Map"},r="Map",c={},l=[{value:"Map instance",id:"map-instance",level:2},{value:"Source code",id:"source-code",level:2},{value:"How to use it",id:"how-to-use-it",level:2},{value:"Some tricky parts",id:"some-tricky-parts",level:3},{value:"<code>getBounds</code>",id:"getbounds",level:4},{value:"<code>PlacesService</code>",id:"placesservice",level:4}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"map",children:"Map"})}),"\n",(0,s.jsxs)(n.p,{children:["This component helps you to create a Map with the Google Maps API. For more information read the Google Maps documentation for the ",(0,s.jsx)(n.a,{href:"https://developers.google.com/maps/documentation/javascript/basics",children:"map"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["It is exported with the name ",(0,s.jsx)(n.code,{children:"MapLayer"}),", it is registered as ",(0,s.jsx)(n.code,{children:"GmvMap"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"map-instance",children:"Map instance"}),"\n",(0,s.jsxs)(n.p,{children:["This component save the original map object provided by Google Maps in a property called ",(0,s.jsx)(n.code,{children:"mapInstance"}),", as the example below."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// ...\nconst { Map } = (await google.maps.importLibrary(\n  'maps',\n)) as google.maps.MapsLibrary;\nmapInstance = new Map(gmvMap.value, mapLayerOptions);\n// ...\n"})}),"\n",(0,s.jsx)(n.h2,{id:"source-code",children:"Source code"}),"\n",(0,s.jsx)(n.p,{children:"You can see the source code on:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/diegoazh/gmap-vue/blob/2c697bb5ae78e5519d95f4873f1ab373e3d25ff9/packages/v3/src/components/map-layer.vue",children:"GitHub"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/docs/vue-3-version/api/components/map#source-code",children:"Here in docs"})}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"how-to-use-it",children:"How to use it"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",metastring:"showLineNumbers",children:'<template>\n  \x3c!-- you can use the auto close form if you don\'t use the slot --\x3e\n  <gmv-map :center="center" :zoom="7" style="width: 100%; height: 500px"/>\n\n  <gmv-map :center="center" :zoom="7" style="width: 100%; height: 500px">\n  </gmv-map>\n</template>\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",metastring:"showLineNumbers",children:'<template>\n  \x3c!-- you can use the auto close form if you don\'t use the slot --\x3e\n  <GmvMap :center="center" :zoom="7" style="width: 100%; height: 500px"/>\n\n  <GmvMap :center="center" :zoom="7" style="width: 100%; height: 500px">\n  </GmvMap>\n</template>\n'})}),"\n",(0,s.jsx)(n.h3,{id:"some-tricky-parts",children:"Some tricky parts"}),"\n",(0,s.jsx)(n.h4,{id:"getbounds",children:(0,s.jsx)(n.code,{children:"getBounds"})}),"\n",(0,s.jsxs)(n.p,{children:["If you need to use the ",(0,s.jsx)(n.code,{children:"getBounds"})," method of the Map instance, you can do it with a reference, and wait for the ",(0,s.jsx)(n.code,{children:"mapPromise"})," to resolve or using the ",(0,s.jsx)(n.code,{children:"useMapPromise('you-map-key')"})," composable to get the map promise and wait for it to resolve."]}),"\n",(0,s.jsxs)(n.p,{children:["If you use the ",(0,s.jsx)(n.code,{children:"getBounds"})," method in the mounted hook you need to take care about three things:"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"The center should be defined"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"The zoom should be defined"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"The map should be visible"})}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["In the ",(0,s.jsx)(n.a,{href:"https://developers.google.com/maps/documentation/javascript/reference/map#Map.getBounds",children:"official documentation"}),"\nit says:"]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"If the map is not yet initialized or center and zoom have not been set then the result is undefined."}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Because of that behavior you must listen for the ",(0,s.jsx)(n.code,{children:"tilesloaded"})," event in the map component, this event is fired when the\nmaps is visible and allows you to accomplish with the three requirements mentioned above."]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["You can refer to the ",(0,s.jsx)(n.a,{href:"https://github.com/diegoazh/gmap-vue/issues/67",children:"issue #67"})]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",metastring:"showLineNumbers",children:"<template>\n  <div>\n    <GmvMap\n      @tilesloaded=\"tilesloadedEvent\"\n      :center=\"center\"\n      :zoom=\"11\"\n      style=\"width: 100%; height: 500px\"\n      ref=\"gmap\">\n        ....\n    </GmvMap>\n  </div>\n</template>\n\n<script>\nexport default {\n  // ...\n  data() {\n    return {\n      map: undefined,\n    }\n  },\n  async mounted() {\n    // this is a good practice\n    await this.$gmapApiPromiseLazy();\n    this.map = await this.$refs.gmap.mapPromise;\n\n    // you can do the same in the following way but is more verbose\n    // this.$refs.gmap.mapPromise\n    //   .then((map) => {\n    //     map.addListener('tilesloaded', () => {\n    //       console.log('>>>>>>>>>> getCenter', map.getCenter())\n    //       console.log('>>>>>>>>>> getZoom', map.getZoom())\n    //       console.log('>>>>>>>>>> getBounds', map.getBounds())\n    //     });\n    //   })\n    //   .catch((e) => console.error(e));\n  },\n  methods: {\n    tilesloadedEvent() {\n      console.log('>>>>>>>>>> getCenter', this.map.getCenter())\n      console.log('>>>>>>>>>> getZoom', this.map.getZoom())\n      console.log('>>>>>>>>>> getBounds', this.map.getBounds())\n    }\n  }\n};\n<\/script>\n"})}),"\n",(0,s.jsx)(n.h4,{id:"placesservice",children:(0,s.jsx)(n.code,{children:"PlacesService"})}),"\n",(0,s.jsxs)(n.p,{children:["If want to use the ",(0,s.jsx)(n.code,{children:"google.maps.places.PlacesService"})," class we let you here an example about how to implement it."]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["You can refer to the ",(0,s.jsx)(n.a,{href:"https://github.com/diegoazh/gmap-vue/issues/130",children:"issue #130"})]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",metastring:"showLineNumbers",children:'<template>\n  <div>\n    <GmvMap\n      :center="center"\n      :zoom="zoom"\n      style="width: 100%; height: 500px"\n      ref="googleMap"\n    >\n    </GmvMap>\n  </div>\n</template>\n\n<script>\nimport { utilities } from "gmap-vue";\n\nconst { getGoogleMapsAPI } = utilities;\n\nexport default {\n  data() {\n    return {\n      center: { lat: 10, lng: 10 },\n      zoom: 11,\n    };\n  },\n  async mounted() {\n    await this.$gmapApiPromiseLazy();\n\n    const google = getGoogleMapsAPI();\n    console.log(">>>>>>>>>>>> placesService", google.maps.places);\n    console.log(">>>>>>>>>>>> map instance", await this.$refs.googleMap.mapPromise);\n\n    const service = new google.maps.places.PlacesService(\n      document.createElement("div") // if you pass the map object here it doesn\'t work\n    );\n\n    console.log("service", service);\n\n    const request = {\n      query: "Museum of Contemporary Art Australia",\n      fields: ["name", "geometry"],\n    };\n\n    const map = await this.$refs.googleMap.mapPromise;\n    service.findPlaceFromQuery(request, function (results, status) {\n      if (status === google.maps.places.PlacesServiceStatus.OK) {\n        for (var i = 0; i < results.length; i++) {\n          console.log(results[i]);\n        }\n        map.setCenter(results[0].geometry.location);\n      }\n    });\n  },\n};\n<\/script>\n'})})]})}function p(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},7252:(e,n,o)=>{o.d(n,{R:()=>i,x:()=>r});var t=o(758);const s={},a=t.createContext(s);function i(e){const n=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);